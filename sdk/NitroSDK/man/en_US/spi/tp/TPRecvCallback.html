<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 8.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<title>TPRecvCallback</title>
<LINK rel="stylesheet" href="../../css/nitro.css" type="text/css">
</head>

<body>

<h1 align="left">TPRecvCallback</h1>
<h2>Definitions</h2>

<dl>
  <dd>
<CODE>#include &lt;nitro/spi.h&gt;</CODE><BR>
<PRE><CODE>typedef void (*TPRecvCallback)(
TPRequestCommand command,
TPRequestResult result,
u16 index );
</CODE></PRE>
  </dd>
</dl><h2>Arguments</h2>
<TABLE border="1" width="100%">
  <TBODY>
    <TR>
<TD width="300"><em><strong><font face="Courier New">command</font></strong></em></TD>
<TD width="700">Type of request command</TD>
    </TR>
    <TR>
<TD><em><strong><font face="Courier New">result</font></strong></em></TD>
<TD>Process results</TD>
    </TR>
    <TR>
<TD><em><strong><font face="Courier New">index</font></strong></em></TD>
<TD>Index value of autosampling callback</TD>
    </TR>
  </TBODY>
</TABLE>
<h2>Return Values</h2>
<p>None.</p>
<H2>Description</H2>
<P>This is the format of the the user callback that is called each time a request to the subprocessor is processed, and each time that a touch panel value is periodically received as the result of autosampling. The <strong><em><code>command</code></em></strong> value identifies for which request the results are acquired. The <strong><em><code>result</code></em></strong> value acquires whether or not it was processed properly. The <strong><em><code>index</code></em></strong> value acquires the index of the most recent data when autosampling is in use. <BR>
</P>
<TABLE border="1">
  <TBODY>
    <TR>
<TD width="30%"><CODE>TP_REQUEST_COMMAND_SAMPLING</CODE></TD>
<TD width="70%">Requests sampling one time. Send with <A href="TP_RequestSamplingAsync.html"><CODE>TP_RequestSampling*</CODE></A>.</TD>
    </TR>
    <TR>
<TD width="30%"><CODE>TP_REQUEST_COMMAND_AUTO_ON</CODE></TD>
<TD width="70%">Requests to start autosampling. Send with <A href="TP_RequestAutoSamplingStart.html"><CODE>TP_RequestAutoSamplingStart</CODE></A>.</TD>
    </TR>
    <TR>
<TD width="30%"><CODE>TP_REQUEST_COMMAND_AUTO_OFF</CODE></TD>
<TD width="70%">Requests to stop autosampling. Send with <A href="TP_RequestAutoSamplingStop.html"><CODE>TP_RequestAutoSamplingStop</CODE></A>.</TD>
    </TR>
    <TR>
<TD width="30%"><CODE>TP_REQUEST_COMMAND_SET_STABILITY</CODE></TD>
<TD width="70%">Requests to set chattering provision parameters. Send with <A href="TP_RequestSetStability.html"><CODE>TP_RequestSetStability</CODE></A>.</TD>
    </TR>
    <TR>
<TD><CODE>TP_REQUEST_COMMAND_AUTO_SAMPLING</CODE></TD>
<TD>This callback is called each time data is set by autosampling.</TD>
    </TR>
  </TBODY>
</TABLE>
<P></P>
<TABLE border="1">
  <TBODY>
    <TR>
<TD width="30%"><CODE>TP_RESULT_SUCCESS</CODE></TD>
<TD width="70%">Successful end</TD>
    </TR>
    <TR>
<TD><CODE>TP_RESULT_INVALID_PARAMETER</CODE></TD>
<TD>Parameters in the request that was sent are incorrect.</TD>
    </TR>
    <TR>
<TD><CODE>TP_RESULT_INVALID_STATUS</CODE></TD>
<TD>Cannot process this instruction in current status.</TD>
    </TR>
    <TR>
<TD><CODE>TP_RESULT_INVALID_EXCLUSIVE</CODE></TD>
<TD>ARM7 processor's peripheral device interface is in busy status.</TD>
    </TR>
    <TR>
<TD><CODE>TP_RESULT_PXI_BUSY</CODE></TD>
<TD>Request failed because communication between CPUs is busy</TD>
    </TR>
  </TBODY>
</TABLE>
<P>The following describes the enumerated type definitions of the arguments.</P>
<PRE><CODE>// Type of instruction issued to the touch panel
typedef enum {
TP_REQUEST_COMMAND_SAMPLING         = 0x0,  // Sample one time
TP_REQUEST_COMMAND_AUTO_ON          = 0x1,  // Start autosampling
TP_REQUEST_COMMAND_AUTO_OFF         = 0x2,  // Stop autosampling
TP_REQUEST_COMMAND_SETUP_STABILITY  = 0x3,  // Set chattering provision value
TP_REQUEST_COMMAND_AUTO_SAMPLING    = 0x10 // Receive autosampling results
} TPRequestCommand;

// Type of results from the touch panel
typedef enum {
TP_RESULT_SUCCESS = 0 ,             // Success
TP_RESULT_INVALID_PARAMETER ,       // Invalid parameter
TP_RESULT_ILLEGAL_STATUS ,          // In current status cannot receive instructions
TP_RESULT_EXCLUSIVE ,               // SPI device is busy
TP_RESULT_PXI_BUSY                  // The PXI communication with ARM7 is busy
} TPRequestResult;
</CODE></PRE>
<h2>See Also</h2>
<P><A href="TP_SetCallback.html"><code>TP_SetCallback</code></A>, <A href="TP_RequestSamplingAsync.html"><code>TP_RequestSampling</code></A>, <A href="TP_RequestAutoSamplingStart.html"><code>TP_RequestAutoSamplingStart</code></A>, <A href="TP_RequestAutoSamplingStop.html"><code>TP_RequestAutoSamplingStop</code></A>, <A href="TP_RequestSetStability.html"><code>TP_RequestSetStability</code></A></P>
<H2>Revision History</H2>
<P>04/16/2004 Initial version</P>
<p align="right"><strong>CONFIDENTIAL</strong></p>
</body>
</html>
